<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste - Temporizadores de Progresso</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        .test-container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 2rem;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .test-section {
            margin-bottom: 2rem;
            padding: 1rem;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .test-button {
            background-color: #3498db;
            color: white;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 0.5rem;
            font-size: 1rem;
            transition: background-color 0.3s;
        }
        
        .test-button:hover {
            background-color: #2980b9;
        }
        
        .test-button.success {
            background-color: #27ae60;
        }
        
        .test-button.danger {
            background-color: #e74c3c;
        }
        
        .test-result {
            margin-top: 1rem;
            padding: 1rem;
            background-color: #f8f9fa;
            border-radius: 4px;
            border-left: 4px solid #3498db;
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <h1>üîÑ Teste de Temporizadores de Progresso</h1>
            <p>Sistema Terra do Bugio - Demonstra√ß√£o de Funcionalidades</p>
        </div>
    </header>

    <div class="test-container">
        <h2>Demonstra√ß√£o dos Temporizadores de Progresso</h2>
        <p>Esta p√°gina demonstra os diferentes tipos de temporizadores implementados no sistema.</p>

        <div class="test-section">
            <h3>1. Temporizador Simples com Barra de Progresso</h3>
            <p>Simula uma opera√ß√£o b√°sica com progresso autom√°tico baseado no tempo.</p>
            <button class="test-button" onclick="testarProgressoSimples()">
                Iniciar Progresso Simples
            </button>
            <div id="resultado1" class="test-result" style="display: none;"></div>
        </div>

        <div class="test-section">
            <h3>2. Temporizador com Passos Definidos</h3>
            <p>Simula uma opera√ß√£o complexa dividida em etapas espec√≠ficas.</p>
            <button class="test-button" onclick="testarProgressoComPassos()">
                Iniciar Progresso com Passos
            </button>
            <div id="resultado2" class="test-result" style="display: none;"></div>
        </div>

        <div class="test-section">
            <h3>3. Temporizador Cancel√°vel</h3>
            <p>Demonstra um progresso que pode ser cancelado pelo usu√°rio.</p>
            <button class="test-button" onclick="testarProgressoCancelavel()">
                Iniciar Progresso Cancel√°vel
            </button>
            <div id="resultado3" class="test-result" style="display: none;"></div>
        </div>

        <div class="test-section">
            <h3>4. Indicador Inline</h3>
            <p>Pequeno indicador de carregamento para opera√ß√µes r√°pidas.</p>
            <button class="test-button" onclick="testarProgressoInline()">
                Mostrar Indicador Inline
            </button>
            <div id="resultado4" class="test-result" style="display: none;"></div>
        </div>

        <div class="test-section">
            <h3>5. Simula√ß√£o de Cadastro</h3>
            <p>Simula o processo de cadastro de uma pessoa com progresso detalhado.</p>
            <button class="test-button success" onclick="testarCadastroSimulado()">
                Simular Cadastro de Pessoa
            </button>
            <div id="resultado5" class="test-result" style="display: none;"></div>
        </div>

        <div class="test-section">
            <h3>6. Simula√ß√£o de Relat√≥rio</h3>
            <p>Simula a gera√ß√£o de um relat√≥rio complexo com m√∫ltiplas etapas.</p>
            <button class="test-button success" onclick="testarRelatorioSimulado()">
                Simular Gera√ß√£o de Relat√≥rio
            </button>
            <div id="resultado6" class="test-result" style="display: none;"></div>
        </div>

        <div class="test-section">
            <h3>7. Teste de Erro</h3>
            <p>Demonstra como o sistema lida com erros durante o progresso.</p>
            <button class="test-button danger" onclick="testarProgressoComErro()">
                Simular Erro no Progresso
            </button>
            <div id="resultado7" class="test-result" style="display: none;"></div>
        </div>
    </div>

    <script src="js/script.js"></script>
    <script>
        // Fun√ß√µes de teste para demonstrar os temporizadores

        async function testarProgressoSimples() {
            const resultado = document.getElementById('resultado1');
            resultado.style.display = 'block';
            resultado.innerHTML = 'Iniciando teste...';

            const timerId = progressTimer.create({
                title: 'Progresso Simples',
                message: 'Executando opera√ß√£o b√°sica...',
                estimatedTime: 5,
                showSteps: false
            });

            // Simular opera√ß√£o
            await new Promise(resolve => setTimeout(resolve, 5000));

            progressTimer.complete(timerId, {
                message: 'Opera√ß√£o conclu√≠da!'
            });

            resultado.innerHTML = '‚úÖ Teste de progresso simples conclu√≠do com sucesso!';
        }

        async function testarProgressoComPassos() {
            const resultado = document.getElementById('resultado2');
            resultado.style.display = 'block';
            resultado.innerHTML = 'Iniciando teste com passos...';

            const timerId = progressTimer.create({
                title: 'Opera√ß√£o Complexa',
                message: 'Executando opera√ß√£o em etapas...',
                estimatedTime: 8,
                steps: [
                    { text: 'Inicializando sistema' },
                    { text: 'Carregando dados' },
                    { text: 'Processando informa√ß√µes' },
                    { text: 'Validando resultados' },
                    { text: 'Finalizando opera√ß√£o' }
                ]
            });

            // Simular cada passo
            for (let i = 0; i < 5; i++) {
                await new Promise(resolve => setTimeout(resolve, 1500));
                progressTimer.nextStep(timerId);
            }

            progressTimer.complete(timerId, {
                message: 'Todas as etapas foram conclu√≠das!'
            });

            resultado.innerHTML = '‚úÖ Teste com passos conclu√≠do com sucesso!';
        }

        async function testarProgressoCancelavel() {
            const resultado = document.getElementById('resultado3');
            resultado.style.display = 'block';
            resultado.innerHTML = 'Iniciando teste cancel√°vel...';

            let cancelado = false;

            const timerId = progressTimer.create({
                title: 'Opera√ß√£o Cancel√°vel',
                message: 'Esta opera√ß√£o pode ser cancelada...',
                estimatedTime: 10,
                cancelable: true,
                onCancel: () => {
                    cancelado = true;
                    resultado.innerHTML = '‚ùå Opera√ß√£o cancelada pelo usu√°rio.';
                },
                steps: [
                    { text: 'Preparando dados' },
                    { text: 'Executando processamento' },
                    { text: 'Salvando resultados' }
                ]
            });

            // Simular opera√ß√£o longa
            for (let i = 0; i < 3 && !cancelado; i++) {
                await new Promise(resolve => setTimeout(resolve, 3000));
                if (!cancelado) {
                    progressTimer.nextStep(timerId);
                }
            }

            if (!cancelado) {
                progressTimer.complete(timerId, {
                    message: 'Opera√ß√£o conclu√≠da sem cancelamento!'
                });
                resultado.innerHTML = '‚úÖ Teste cancel√°vel conclu√≠do (n√£o foi cancelado).';
            }
        }

        async function testarProgressoInline() {
            const resultado = document.getElementById('resultado4');
            resultado.style.display = 'block';
            resultado.innerHTML = 'Carregando dados...';

            const loadingEl = progressTimer.createInline(resultado, 'Buscando informa√ß√µes...');

            // Simular carregamento
            await new Promise(resolve => setTimeout(resolve, 3000));

            progressTimer.removeInline(loadingEl);
            resultado.innerHTML = '‚úÖ Dados carregados com sucesso usando indicador inline!';
        }

        async function testarCadastroSimulado() {
            const resultado = document.getElementById('resultado5');
            resultado.style.display = 'block';
            resultado.innerHTML = 'Simulando cadastro...';

            const timerId = progressTimer.create({
                title: 'Cadastrando Pessoa',
                message: 'Validando e salvando dados de Jo√£o Silva...',
                estimatedTime: 4,
                steps: [
                    { text: 'Validando dados' },
                    { text: 'Verificando duplicatas' },
                    { text: 'Salvando no banco de dados' },
                    { text: 'Enviando confirma√ß√£o' }
                ]
            });

            // Simular processo de cadastro
            await new Promise(resolve => setTimeout(resolve, 800));
            progressTimer.nextStep(timerId);

            await new Promise(resolve => setTimeout(resolve, 1200));
            progressTimer.update(timerId, { message: 'Verificando se pessoa j√° existe...' });
            progressTimer.nextStep(timerId);

            await new Promise(resolve => setTimeout(resolve, 1000));
            progressTimer.update(timerId, { message: 'Salvando dados no banco...' });
            progressTimer.nextStep(timerId);

            await new Promise(resolve => setTimeout(resolve, 800));
            progressTimer.update(timerId, { message: 'Finalizando cadastro...' });
            progressTimer.nextStep(timerId);

            progressTimer.complete(timerId, {
                message: 'Jo√£o Silva cadastrado com sucesso!'
            });

            resultado.innerHTML = '‚úÖ Simula√ß√£o de cadastro conclu√≠da!';
        }

        async function testarRelatorioSimulado() {
            const resultado = document.getElementById('resultado6');
            resultado.style.display = 'block';
            resultado.innerHTML = 'Simulando gera√ß√£o de relat√≥rio...';

            const timerId = progressTimer.create({
                title: 'Gerando Relat√≥rio',
                message: 'Coletando dados de frequ√™ncia...',
                estimatedTime: 7,
                steps: [
                    { text: 'Preparando consulta SQL' },
                    { text: 'Executando consulta no banco' },
                    { text: 'Processando 1.250 registros' },
                    { text: 'Agrupando dados por categoria' },
                    { text: 'Formatando relat√≥rio' },
                    { text: 'Gerando gr√°ficos' }
                ]
            });

            // Simular gera√ß√£o de relat√≥rio
            await new Promise(resolve => setTimeout(resolve, 600));
            progressTimer.nextStep(timerId);

            await new Promise(resolve => setTimeout(resolve, 1500));
            progressTimer.update(timerId, { message: 'Consultando banco de dados...' });
            progressTimer.nextStep(timerId);

            await new Promise(resolve => setTimeout(resolve, 2000));
            progressTimer.update(timerId, { message: 'Processando registros encontrados...' });
            progressTimer.nextStep(timerId);

            await new Promise(resolve => setTimeout(resolve, 1200));
            progressTimer.update(timerId, { message: 'Organizando dados...' });
            progressTimer.nextStep(timerId);

            await new Promise(resolve => setTimeout(resolve, 800));
            progressTimer.update(timerId, { message: 'Aplicando formata√ß√£o...' });
            progressTimer.nextStep(timerId);

            await new Promise(resolve => setTimeout(resolve, 1000));
            progressTimer.update(timerId, { message: 'Criando visualiza√ß√µes...' });
            progressTimer.nextStep(timerId);

            progressTimer.complete(timerId, {
                message: 'Relat√≥rio gerado com 1.250 registros!'
            });

            resultado.innerHTML = '‚úÖ Simula√ß√£o de relat√≥rio conclu√≠da!';
        }

        async function testarProgressoComErro() {
            const resultado = document.getElementById('resultado7');
            resultado.style.display = 'block';
            resultado.innerHTML = 'Simulando erro...';

            const timerId = progressTimer.create({
                title: 'Opera√ß√£o com Erro',
                message: 'Tentando executar opera√ß√£o...',
                estimatedTime: 4,
                steps: [
                    { text: 'Conectando ao servidor' },
                    { text: 'Autenticando usu√°rio' },
                    { text: 'Executando opera√ß√£o' }
                ]
            });

            // Simular in√≠cio normal
            await new Promise(resolve => setTimeout(resolve, 1000));
            progressTimer.nextStep(timerId);

            await new Promise(resolve => setTimeout(resolve, 1500));
            progressTimer.update(timerId, { message: 'Verificando credenciais...' });
            progressTimer.nextStep(timerId);

            // Simular erro
            await new Promise(resolve => setTimeout(resolve, 1000));
            progressTimer.remove(timerId);

            // Mostrar erro
            alert('‚ùå Erro simulado: Falha na conex√£o com o servidor!');
            resultado.innerHTML = '‚ùå Teste de erro executado - progresso foi interrompido conforme esperado.';
        }

        // Mostrar informa√ß√µes sobre a implementa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üîÑ Sistema de Temporizadores de Progresso carregado!');
            console.log('üìä Funcionalidades dispon√≠veis:');
            console.log('  - Progresso com barra visual');
            console.log('  - Cron√¥metro com tempo estimado');
            console.log('  - Passos sequenciais com status');
            console.log('  - Cancelamento de opera√ß√µes');
            console.log('  - Indicadores inline para opera√ß√µes r√°pidas');
            console.log('  - Integra√ß√£o com todas as opera√ß√µes do sistema');
        });
    </script>
</body>
</html>
